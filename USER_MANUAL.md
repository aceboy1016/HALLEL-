# HALLEL 予約管理システム 利用マニュアル

このマニュアルでは、HALLEL予約管理システムの基本的な使い方を説明します。

---

## 📱 1. 閲覧ページ（お客様向け）

### アクセス方法
各店舗の予約状況ページにアクセスできます：

- **店舗選択ページ**: https://your-domain.vercel.app/stores
- **各店舗の直接リンク**:
  - 渋谷店: `/store/shibuya`
  - 恵比寿店: `/store/ebisu`
  - 半蔵門店: `/store/hanzomon`
  - 中目黒店: `/store/nakameguro`
  - 代々木上原店: `/store/yoyogiuehara`

### 画面の見方

#### 🎨 色の意味
- **緑色**: 空いています（予約が少ない）
- **黄色**: やや混雑しています
- **赤色**: 満枠です（予約がいっぱい）
- **🔒 貸切利用**: 貸切予約のため利用できません

#### 📅 日付の切り替え
- **カレンダーアイコン**: クリックして日付を選択
- **← →ボタン**: 前日・翌日に移動

#### 🏢 店舗別の表示

**部屋がない店舗（渋谷店・代々木上原店）**:
```
10:00 ████████░░░░░░░░ 3/7人
       ↑          ↑
    時間帯    現在の予約数/最大収容人数
```

**部屋がある店舗（恵比寿・半蔵門・中目黒）**:
```
10:00
  個室A: ■□ 1/1人
  個室B: □□ 0/3人
     ↑
  部屋ごとに表示
```

---

## 🔐 2. 管理者ページへのログイン

### ログイン手順

1. **ログインページにアクセス**
   - URL: https://your-domain.vercel.app/login

2. **パスワードを入力**
   - 初期パスワード: `hallel0000admin`
   - ⚠️ **初回ログイン後は必ずパスワードを変更してください**

3. **「ログイン」ボタンをクリック**

### ログイン後の画面

管理者ダッシュボードが表示されます：
- 📊 **カレンダー管理**: 予約の追加・削除
- 📋 **アクティビティログ**: 操作履歴の確認
- 🔑 **パスワード変更**: セキュリティ設定

---

## 📆 3. 予約管理（カレンダー画面）

### カレンダー管理画面を開く

1. 管理者ダッシュボードで「📊 カレンダー管理」をクリック
2. または直接アクセス: `/admin/calendar?store=shibuya`

### 🏪 店舗の切り替え

画面上部のタブで店舗を切り替えられます：
```
[渋谷店] [恵比寿店] [半蔵門店] [中目黒店] [代々木上原店]
```

---

## ➕ 4. 手動で予約を追加する方法

### 手順1: 時間帯を選択

1. カレンダー画面で、予約を入れたい**日付を選択**（左上のカレンダー）
2. タイムライン上の**時間帯をクリック**（例: 10:00、14:30など）

### 手順2: 予約情報を入力

モーダルウィンドウが表示されます：

#### 📝 入力項目

**貸切予約の場合**:
```
□ 貸切予約
  ↑ このチェックボックスをON

開始時間: 10:00
終了時間: 12:00
顧客名: 株式会社〇〇（任意）
```

**通常予約の場合（部屋がある店舗のみ）**:
```
□ 貸切予約  ← チェックなし

部屋 / エリア:
  [個室Aを選択 ▼]

開始時間: 10:00
終了時間: 11:00
顧客名: 山田太郎（任意）
```

**通常予約の場合（部屋がない店舗）**:
```
開始時間: 14:00
終了時間: 15:30
顧客名: 佐藤花子（任意）
```

### 手順3: 保存

「保存」ボタンをクリックすると、予約が追加されます。

---

## 🗑️ 5. 予約を削除する方法

### 手順

1. カレンダー画面で**該当の日付を選択**
2. タイムライン上の**予約をクリック**
   - 予約には顧客名や「貸切」と表示されています
3. 「削除」ボタンをクリック
4. 確認ダイアログで「OK」をクリック

---

## 🔄 6. 自動予約連携（Gmail）

### 仕組み

Google Apps Script (GAS) が自動的に以下を処理します：

✅ **自動で行われること**:
- 予約メールの検出（Gmailから）
- 予約情報の抽出（日付・時間・部屋名）
- システムへの自動登録
- キャンセルメールの検出と反映
- **貸切予約の自動判別**（「貸切利用」を含むメール）

❌ **手動が必要な場合**:
- メール形式が異なる予約
- 特殊な時間帯の予約
- 直接予約（電話予約など）

---

## 🏢 7. 店舗別の特徴

### 渋谷店・代々木上原店
- **部屋の区別なし**: 全体の人数のみ表示
- **最大収容人数**: 7人

### 恵比寿店
- **部屋**: 個室A（1人）/ 個室B（3人）
- 予約時に部屋を選択

### 半蔵門店
- **部屋**: STUDIO A（個室、1人）/ STUDIO B（オープン、3人）
- **営業時間**: 8:00-22:00のみ表示
- 予約時に部屋を選択

### 中目黒店
- **エリア**: 格闘技エリア（1人）/ フリーウエイトエリア（3人）
- 予約時にエリアを選択

---

## ⚠️ 8. よくある質問・トラブルシューティング

### Q1. 予約が反映されない
**A1**: 以下を確認してください：
- 日付が正しく選択されているか
- ページを再読み込み（F5キー）
- 部屋のある店舗で部屋を選択したか

### Q2. 削除できない
**A2**: 以下の可能性があります：
- ログインしていない → 再ログイン
- 別の店舗の予約を選択している → 店舗タブを確認

### Q3. 貸切予約の入れ方がわからない
**A3**:
1. 時間帯をクリック
2. **「貸切予約」チェックボックスをON**
3. 開始・終了時間を入力（部屋選択は不要）
4. 保存

### Q4. パスワードを忘れた
**A4**: システム管理者に連絡して、`password.txt`を削除してもらい、初期パスワードに戻してください。

### Q5. 予約時間の制限は？
**A5**:
- 30分単位で予約可能
- 半蔵門店のみ8:00-22:00（他店舗は24時間）
- 終了時間は開始時間より後である必要があります

---

## 🔒 9. セキュリティとログアウト

### セキュリティのベストプラクティス

✅ **推奨事項**:
- 定期的にパスワードを変更（3ヶ月ごと）
- 複雑なパスワードを使用（12文字以上、大文字・小文字・数字・記号）
- 共用PCでは必ずログアウト

### ログアウト方法

1. 管理者ダッシュボードで「ログアウト」をクリック
2. または画面右上の「ログアウト」ボタン

---

## 📞 10. サポート

### 問題が解決しない場合

- **技術サポート**: GitHub Issues
- **緊急時**: システム管理者に連絡

---

## 📋 クイックリファレンス

| 操作 | 手順 |
|------|------|
| 予約状況を見る | `/stores` → 店舗選択 |
| ログイン | `/login` → パスワード入力 |
| 予約を追加 | カレンダー → 時間帯クリック → 情報入力 → 保存 |
| 予約を削除 | カレンダー → 予約クリック → 削除 |
| 貸切予約を追加 | 時間帯クリック → 「貸切予約」ON → 保存 |
| パスワード変更 | 管理ダッシュボード → パスワード変更 |
| ログアウト | 画面右上「ログアウト」 |

---

**最終更新**: 2025-01-21
**バージョン**: 1.0
**対象システム**: HALLEL 予約管理システム（全店舗対応版）
