# HALLEL çµ±åˆäºˆç´„æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ 

## æ¦‚è¦
å…¨åº—èˆ—ã®ç©ºãçŠ¶æ³ã‚’æ¨ªæ–­æ¤œç´¢ã§ãã‚‹ã‚·ã‚¹ãƒ†ãƒ ã€‚åˆ©ç”¨è€…ãŒå¸Œæœ›æ—¥æ™‚ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ã©ã®åº—èˆ—ãªã‚‰äºˆç´„å¯èƒ½ã‹ãŒä¸€ç›®ã§ã‚ã‹ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

**ç›®çš„:**
- æ··é›‘é˜²æ­¢
- é€€ä¼šé˜²æ­¢
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š

---

## åº—èˆ—æƒ…å ±

| åº—èˆ—å | æœ€å¤§æ æ•° | ã‚·ã‚¹ãƒ†ãƒ  | ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ |
|--------|---------|---------|-------------|
| æµæ¯”å¯¿ | 2æ ï¼ˆå€‹å®¤A + å€‹å®¤Bï¼‰ | Google Apps Script | Google Calendar |
| åŠè”µé–€ | 4æ ï¼ˆ3æ  + å€‹å®¤1æ ï¼‰ | Google Apps Script | Google Calendar |
| æ¸‹è°· | 7æ  | Vercel (Flask) | PostgreSQL |
| ä»£ã€…æœ¨ä¸ŠåŸ | 2æ  | TBD | TBD |
| ä¸­ç›®é»’ | 1æ  | TBD | TBD |

---

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çµ±åˆäºˆç´„æ¤œç´¢ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰                      â”‚
â”‚  (Vercel/Next.js - æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ)            â”‚
â”‚  https://hallel-search.vercel.app (ä»®)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚           â”‚           â”‚
       v           v           v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚æµæ¯”å¯¿ APIâ”‚ â”‚åŠè”µé–€ APIâ”‚ â”‚æ¸‹è°· API  â”‚
â”‚  (GAS)   â”‚ â”‚  (GAS)   â”‚ â”‚(Vercel)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚            â”‚            â”‚
     v            v            v
[Google Cal] [Google Cal] [PostgreSQL]

       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ä»£ã€…æœ¨ APIâ”‚ â”‚ä¸­ç›®é»’ APIâ”‚
       â”‚  (TBD)   â”‚ â”‚  (TBD)   â”‚
       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚            â”‚
            v            v
         [TBD]        [TBD]
```

---

## APIä»•æ§˜ï¼ˆçµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼‰

### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```
GET /api/availability?date=2025-12-01&start_time=10:00&end_time=12:00
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "store": "ebisu",
  "store_name": "æµæ¯”å¯¿åº—",
  "date": "2025-12-01",
  "start_time": "10:00",
  "end_time": "12:00",
  "available": true,
  "total_slots": 2,
  "occupied_slots": 1,
  "remaining_slots": 1,
  "studios": {
    "å€‹å®¤A": "available",
    "å€‹å®¤B": "occupied"
  }
}
```

**ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èª¬æ˜:**
- `store`: åº—èˆ—ID (ebisu, hanzomon, shibuya, yoyogiuehara, nakameguro)
- `store_name`: æ—¥æœ¬èªåº—èˆ—å
- `available`: äºˆç´„å¯èƒ½ã‹ (boolean)
- `total_slots`: åˆè¨ˆæ æ•°
- `occupied_slots`: äºˆç´„æ¸ˆã¿æ æ•°
- `remaining_slots`: æ®‹ã‚Šæ æ•°
- `studios`: ã‚¹ã‚¿ã‚¸ã‚ªã”ã¨ã®è©³ç´°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

---

## å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

### Phase 1: å„åº—èˆ—ã®ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ âœ…é€²è¡Œä¸­
- [x] æµæ¯”å¯¿åº—ï¼ˆGAS + Google Calendarï¼‰
- [x] åŠè”µé–€åº—ï¼ˆGAS + Google Calendarï¼‰
- [x] æ¸‹è°·åº—ï¼ˆVercel + PostgreSQLï¼‰
- [ ] ä»£ã€…æœ¨ä¸ŠåŸåº—
- [ ] ä¸­ç›®é»’åº—

### Phase 2: APIä½œæˆï¼ˆPhase 1å®Œäº†å¾Œï¼‰
å„åº—èˆ—ã«ç©ºãçŠ¶æ³å–å¾—APIã‚’è¿½åŠ 

#### æµæ¯”å¯¿åº—ãƒ»åŠè”µé–€åº—ï¼ˆGASï¼‰
`gas-ebisu-calendar-sync.js` / `gas-hanzomon-calendar-sync.js` ã«è¿½åŠ :

```javascript
/**
 * Web APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ - ç©ºãçŠ¶æ³å–å¾—
 */
function doGet(e) {
  try {
    const params = e.parameter;
    const date = params.date;
    const startTime = params.start_time;
    const endTime = params.end_time;

    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    if (!date || !startTime || !endTime) {
      return createJsonResponse({
        error: 'Missing required parameters: date, start_time, end_time'
      }, 400);
    }

    const calendar = CalendarApp.getCalendarById(CONFIG_EBISU.CALENDAR_ID);

    // æ—¥æ™‚ç¯„å›²ã‚’ä½œæˆ
    const searchStart = new Date(`${date}T${startTime}:00`);
    const searchEnd = new Date(`${date}T${endTime}:00`);

    // ãã®æ™‚é–“å¸¯ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—
    const events = calendar.getEvents(searchStart, searchEnd);

    // HALLELäºˆç´„ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿
    const hallelEvents = events.filter(event =>
      event.getTitle().includes('HALLEL-')
    );

    // ã‚¹ã‚¿ã‚¸ã‚ªã”ã¨ã®ç©ºãçŠ¶æ³
    const studios = {
      'å€‹å®¤A': 'available',
      'å€‹å®¤B': 'available'
    };

    hallelEvents.forEach(event => {
      const title = event.getTitle();
      if (title.includes('å€‹å®¤A')) studios['å€‹å®¤A'] = 'occupied';
      if (title.includes('å€‹å®¤B')) studios['å€‹å®¤B'] = 'occupied';
    });

    const occupiedSlots = Object.values(studios).filter(s => s === 'occupied').length;
    const totalSlots = 2; // æµæ¯”å¯¿ã¯2æ 

    return createJsonResponse({
      store: 'ebisu',
      store_name: 'æµæ¯”å¯¿åº—',
      date: date,
      start_time: startTime,
      end_time: endTime,
      available: occupiedSlots < totalSlots,
      total_slots: totalSlots,
      occupied_slots: occupiedSlots,
      remaining_slots: totalSlots - occupiedSlots,
      studios: studios
    });

  } catch (error) {
    return createJsonResponse({
      error: error.toString()
    }, 500);
  }
}

function createJsonResponse(data, statusCode = 200) {
  const output = ContentService.createTextOutput(JSON.stringify(data));
  output.setMimeType(ContentService.MimeType.JSON);
  return output;
}
```

**ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †:**
1. GASã‚¨ãƒ‡ã‚£ã‚¿ã§ã€Œãƒ‡ãƒ—ãƒ­ã‚¤ã€â†’ã€Œæ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ã€
2. ç¨®é¡: ã€Œã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã€
3. å®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œè‡ªåˆ†ã€
4. ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œå…¨å“¡ã€
5. ãƒ‡ãƒ—ãƒ­ã‚¤URLã‚’ãƒ¡ãƒ¢ï¼ˆçµ±åˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ä½¿ç”¨ï¼‰

#### æ¸‹è°·åº—ãƒ»ä»£ã€…æœ¨ä¸ŠåŸåº—ãƒ»ä¸­ç›®é»’åº—ï¼ˆFlaskï¼‰
`app.py` ã«è¿½åŠ :

```python
@app.route('/api/availability', methods=['GET'])
def check_availability():
    """ç©ºãçŠ¶æ³å–å¾—API"""
    date = request.args.get('date')
    start_time = request.args.get('start_time')
    end_time = request.args.get('end_time')
    store = request.args.get('store', 'shibuya')

    # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    if not all([date, start_time, end_time]):
        return jsonify({'error': 'Missing required parameters'}), 400

    # åº—èˆ—ã”ã¨ã®æœ€å¤§æ æ•°
    MAX_SLOTS = {
        'shibuya': 7,
        'yoyogiuehara': 2,
        'nakameguro': 1
    }

    max_slots = MAX_SLOTS.get(store, 1)

    conn = get_db_conn()
    try:
        with conn.cursor() as cur:
            cur.execute("""
                SELECT COUNT(*) FROM reservations
                WHERE date = %s
                AND start_time = %s
                AND end_time = %s
                AND store = %s
            """, (date, start_time, end_time, store))

            occupied_slots = cur.fetchone()[0]
            remaining_slots = max_slots - occupied_slots

            return jsonify({
                'store': store,
                'store_name': f'{store}åº—',
                'date': date,
                'start_time': start_time,
                'end_time': end_time,
                'available': remaining_slots > 0,
                'total_slots': max_slots,
                'occupied_slots': occupied_slots,
                'remaining_slots': remaining_slots
            })
    finally:
        conn.close()
```

### Phase 3: çµ±åˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä½œæˆ

æ–°ã—ã„Vercelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ:

```bash
npx create-next-app@latest hallel-search
cd hallel-search
```

#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
```
hallel-search/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index.tsx           # ãƒ¡ã‚¤ãƒ³æ¤œç´¢ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ search.ts       # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIï¼ˆå…¨åº—èˆ—é›†ç´„ï¼‰
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ SearchForm.tsx      # æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â”œâ”€â”€ StoreCard.tsx       # åº—èˆ—ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
â”‚   â””â”€â”€ TimeSlotPicker.tsx  # æ™‚é–“é¸æŠ
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ stores.ts           # åº—èˆ—APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¨­å®š
â””â”€â”€ public/
```

#### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**pages/index.tsx**
```typescript
import { useState } from 'react';
import SearchForm from '@/components/SearchForm';
import StoreCard from '@/components/StoreCard';

export default function Home() {
  const [results, setResults] = useState([]);
  const [loading, setLoading] = useState(false);

  const handleSearch = async (date: string, startTime: string, endTime: string) => {
    setLoading(true);
    try {
      const res = await fetch(`/api/search?date=${date}&start_time=${startTime}&end_time=${endTime}`);
      const data = await res.json();
      setResults(data.stores);
    } catch (error) {
      console.error('æ¤œç´¢ã‚¨ãƒ©ãƒ¼:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="container">
      <h1>HALLEL ç©ºãçŠ¶æ³æ¤œç´¢</h1>
      <SearchForm onSearch={handleSearch} />

      {loading && <div>æ¤œç´¢ä¸­...</div>}

      <div className="results">
        {results.map(store => (
          <StoreCard key={store.store} data={store} />
        ))}
      </div>
    </div>
  );
}
```

**pages/api/search.ts**
```typescript
import type { NextApiRequest, NextApiResponse } from 'next';

const STORE_APIS = {
  ebisu: 'https://script.google.com/macros/s/YOUR_EBISU_DEPLOY_ID/exec',
  hanzomon: 'https://script.google.com/macros/s/YOUR_HANZOMON_DEPLOY_ID/exec',
  shibuya: 'https://hallel.vercel.app/api/availability',
  yoyogiuehara: 'https://hallel-yoyogiuehara.vercel.app/api/availability',
  nakameguro: 'https://hallel-nakameguro.vercel.app/api/availability',
};

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  const { date, start_time, end_time } = req.query;

  try {
    const promises = Object.entries(STORE_APIS).map(async ([store, apiUrl]) => {
      const url = `${apiUrl}?date=${date}&start_time=${start_time}&end_time=${end_time}&store=${store}`;
      const response = await fetch(url);
      return response.json();
    });

    const stores = await Promise.all(promises);

    res.status(200).json({
      success: true,
      stores: stores,
      summary: {
        total_stores: stores.length,
        available_stores: stores.filter(s => s.available).length,
      }
    });
  } catch (error) {
    res.status(500).json({ error: 'Failed to fetch availability' });
  }
}
```

**components/StoreCard.tsx**
```typescript
interface StoreCardProps {
  data: {
    store: string;
    store_name: string;
    available: boolean;
    remaining_slots: number;
    total_slots: number;
  };
}

export default function StoreCard({ data }: StoreCardProps) {
  const statusColor = data.available ? 'green' : 'red';
  const statusText = data.available
    ? `äºˆç´„å¯èƒ½ï¼ˆæ®‹ã‚Š${data.remaining_slots}æ ï¼‰`
    : 'æº€å®¤';

  return (
    <div className={`store-card ${statusColor}`}>
      <h3>{data.store_name}</h3>
      <div className="status">{statusText}</div>
      <div className="capacity">
        {data.occupied_slots}/{data.total_slots}æ ä½¿ç”¨ä¸­
      </div>
      {data.available && (
        <button>ã“ã®åº—èˆ—ã§äºˆç´„ã™ã‚‹</button>
      )}
    </div>
  );
}
```

### Phase 4: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»ãƒ†ã‚¹ãƒˆ

1. **Vercelã«ãƒ‡ãƒ—ãƒ­ã‚¤**
   ```bash
   vercel --prod
   ```

2. **å„åº—èˆ—APIã®URLã‚’è¨­å®š**
   - ç’°å¢ƒå¤‰æ•°ã«å„åº—èˆ—ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®š

3. **E2Eãƒ†ã‚¹ãƒˆ**
   - å…¨åº—èˆ—ã®ç©ºãçŠ¶æ³ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèª
   - ãƒ¬ã‚¹ãƒãƒ³ã‚¹é€Ÿåº¦ã®ç¢ºèª
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ç¢ºèª

---

## UI/UXè¨­è¨ˆ

### ãƒ¡ã‚¤ãƒ³ç”»é¢ã‚¤ãƒ¡ãƒ¼ã‚¸
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HALLEL ç©ºãçŠ¶æ³æ¤œç´¢                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  æ—¥ä»˜: [2025-12-01 â–¼]                 â”‚
â”‚  é–‹å§‹æ™‚åˆ»: [10:00 â–¼]                  â”‚
â”‚  çµ‚äº†æ™‚åˆ»: [12:00 â–¼]                  â”‚
â”‚                                        â”‚
â”‚  [æ¤œç´¢]                                â”‚
â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¤œç´¢çµæœ: 5åº—èˆ—ä¸­3åº—èˆ—ã§äºˆç´„å¯èƒ½       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æµæ¯”å¯¿åº— âœ…  â”‚  â”‚ åŠè”µé–€åº— âœ…  â”‚  â”‚
â”‚  â”‚ æ®‹ã‚Š1æ       â”‚  â”‚ æ®‹ã‚Š2æ       â”‚  â”‚
â”‚  â”‚ [äºˆç´„ã™ã‚‹]   â”‚  â”‚ [äºˆç´„ã™ã‚‹]   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ¸‹è°·åº— âœ…    â”‚  â”‚ ä»£ã€…æœ¨ä¸ŠåŸâŒ â”‚  â”‚
â”‚  â”‚ æ®‹ã‚Š3æ       â”‚  â”‚ æº€å®¤         â”‚  â”‚
â”‚  â”‚ [äºˆç´„ã™ã‚‹]   â”‚  â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ ä¸­ç›®é»’åº— âŒ  â”‚                    â”‚
â”‚  â”‚ æº€å®¤         â”‚                    â”‚
â”‚  â”‚              â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ©Ÿèƒ½
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç©ºãçŠ¶æ³è¡¨ç¤º
- âœ… è‰²åˆ†ã‘ï¼ˆç·‘:ç©ºãã€é»„:æ®‹å°‘ã€èµ¤:æº€å®¤ï¼‰
- âœ… æ®‹ã‚Šæ æ•°è¡¨ç¤º
- âœ… ä»£æ›¿åº—èˆ—ææ¡ˆ
- âœ… ç›´æ¥äºˆç´„ã¸ã®ãƒªãƒ³ã‚¯
- ğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ“ãƒ¥ãƒ¼ï¼ˆå°†æ¥çš„ã«ï¼‰
- ğŸ”” ç©ºãé€šçŸ¥æ©Ÿèƒ½ï¼ˆå°†æ¥çš„ã«ï¼‰

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### CORSè¨­å®š
å„åº—èˆ—APIã«CORSãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¨­å®š:
```javascript
// GAS
function doGet(e) {
  const output = createJsonResponse(data);
  output.setHeader('Access-Control-Allow-Origin', 'https://hallel-search.vercel.app');
  return output;
}
```

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’1åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- é »ç¹ãªæ›´æ–°ã‚’é¿ã‘ã€å„åº—èˆ—APIã®è² è·ã‚’è»½æ¸›

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- 1ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ãŸã‚Š1åˆ†é–“ã«10å›ã¾ã§æ¤œç´¢å¯èƒ½

---

## é–‹ç™ºã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| Phase | ã‚¿ã‚¹ã‚¯ | æœŸé™ |
|-------|--------|------|
| 1 | ä»£ã€…æœ¨ä¸ŠåŸåº—ã‚·ã‚¹ãƒ†ãƒ ä½œæˆ | TBD |
| 1 | ä¸­ç›®é»’åº—ã‚·ã‚¹ãƒ†ãƒ ä½œæˆ | TBD |
| 2 | å„åº—èˆ—ã«APIè¿½åŠ  | TBD |
| 3 | çµ±åˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£… | TBD |
| 4 | ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ | TBD |

---

## æ³¨æ„äº‹é …

1. **å…¨åº—èˆ—ã®ã‚·ã‚¹ãƒ†ãƒ ãŒå®Œæˆã—ã¦ã‹ã‚‰å®Ÿè£…é–‹å§‹**
2. **å„åº—èˆ—ã®API URLã¯ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†**
3. **GASã®ãƒ‡ãƒ—ãƒ­ã‚¤IDã¯å¿…ãšãƒ¡ãƒ¢**
4. **CORSè¨­å®šã‚’å¿˜ã‚Œãšã«**
5. **ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®ç›£è¦–ï¼ˆç‰¹ã«Gmail APIï¼‰**

---

## é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

- `gas-ebisu-calendar-sync.js` - æµæ¯”å¯¿åº—GASï¼ˆAPIè¿½åŠ äºˆå®šï¼‰
- `gas-hanzomon-calendar-sync.js` - åŠè”µé–€åº—GASï¼ˆAPIè¿½åŠ äºˆå®šï¼‰
- `app.py` - æ¸‹è°·ãƒ»ä»£ã€…æœ¨ä¸ŠåŸãƒ»ä¸­ç›®é»’ã®Flaskã‚¢ãƒ—ãƒªï¼ˆAPIè¿½åŠ äºˆå®šï¼‰

---

**æœ€çµ‚æ›´æ–°:** 2025-11-14
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** è¨ˆç”»ä¸­ï¼ˆPhase 1é€²è¡Œä¸­ï¼‰
